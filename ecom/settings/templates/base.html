{% load static %}
{% load cart_template_tags %}

<!DOCTYPE html>
<html lang="en">
<head >
    <title>Django Ecom {% block head_title %}{% endblock %}</title>
    {% block extra_head %}
    {% endblock %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="57x57" href="{% static 'icons/apple-icon-57x57.png' %}">
    <link rel="apple-touch-icon" sizes="60x60" href="{% static 'icons/apple-icon-60x60.png' %}">
    <link rel="apple-touch-icon" sizes="72x72" href="{% static 'icons/apple-icon-72x72.png' %}">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'icons/apple-icon-76x76.png' %}">
    <link rel="apple-touch-icon" sizes="114x114" href="{% static 'icons/apple-icon-114x114.png' %}">
    <link rel="apple-touch-icon" sizes="120x120" href="{% static 'icons/apple-icon-120x120.png' %}">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'icons/apple-icon-144x144.png' %}">
    <link rel="apple-touch-icon" sizes="152x152" href="{% static 'icons/apple-icon-152x152.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'icons/apple-icon-180x180.png' %}">
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'icons/android-icon-192x192.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'icons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'icons/favicon-96x96.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'icons/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'icons/manifest.json' %}">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="{% static 'icons/ms-icon-144x144.png' %}">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Mukta:300,400,700">
    <link rel="stylesheet" type="text/css" href="{% static 'fonts/icomoon/style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/magnific-popup.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/jquery-ui.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/aos.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
          integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"/>
</head>
<style>form.example button {
    float: left;
    width: 20%;
    padding: 10px;
    background: #2196F3;
    color: white;
    font-size: 17px;
    border: 1px solid grey;
    border-left: none;
    cursor: pointer;
  }
  
  form.example button:hover {
    background: #0b7dda;
  }</style>
  {% block additional_styles %}
  <style>
    body {
       background-image: url('{% static 'images/background.png' %}');
       background-position: 40% ;  /* Centers the background image */
       background-repeat: no-repeat; /* Prevents repeating the background image */
       background-size: cover;       /* Ensures the image covers the entire body */
    }
 </style>
 
{% endblock %}
<body >

<div class="site-wrap">
    <header class="site-navbar" role="banner" >
        <div class="site-navbar-top">
            <div class="container">
                <div class="row">
                    
                    <div style="display: flex;">
                        <div>
                            <a href="{% url 'home' %}">
                                <img class="img-fluid" src="{% static 'images/logo.png' %}" style="width: 80px; height: 75px;"/>
                                </a>
                            
                        </div>
                    </div>
                    <div class="col-sm"><h1>Terra Locale</h1> <p>E-Departmental Store</p></div>
                    <div class="col-6 col-md-4 order-3 order-md-3 text-right">
                        
                        <div class="site-top-icons">
                            <ul>
                                <li>
                                    {% if request.user.is_authenticated %}
                                        <a href="{% url 'profile' %}"><span>My Profile<i class="fas fa-user"></i></span></a>
                                    {% else %}
                                        <a href="{% url 'account_login' %}"><span><i
                                                class="fas fa-sign-in-alt"></i>LOGIN</span></a>
                                    {% endif %}
                                </li>
                                <li>  
                                    <a href="{% url 'cart:summary' %}" class="site-cart">
                                        <span><i class="fas fa-shopping-cart"></i></span>
                                        <span class="count">{{ request|cart_item_count }}</span>
                                    </a>
                                </li>
                                <li class="d-inline-block d-md-none ml-md-0">
                                    <a href="#" class="site-menu-toggle js-menu-toggle">
                                        <span><i class="fas fa-bars"></i></span>
                                    </a>
                                </li>
                                <li>
                                   
                                    <form class="searchclass" action="{% url 'search' %}" style="margin:auto;max-width:300px" method="get" role="search">
                                        <div class="input-group add-on" style="display: flex; flex-ba">
                                            <input class="form-control" placeholder="Search.." id="srch-term" type="text" name="search" height=20px>
                                            <div class="input-group-btn">
                                                <button class="btn btn-default" type="submit"><i class="fa fa-search" style="height: 20px;"></i></button>
                                            </div>
                                        </div>
                                    </form>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        {% include 'navbar.html' %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    <span class="alert-inner--icon"><i class="ni ni-like-2"></i></span>
                    <span class="alert-inner--text">{{ message }}</span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endfor %}
        {% endif %}

    </header>

    {% block content %}
    {% endblock content %}

    {% include 'footer.html' %}

</div>

{% include 'scripts.html' %}
<!-- Chatbot Icon -->
<div style="position: fixed; bottom: 20px; right: 20px; cursor: pointer;" onclick="toggleChatbot()">
    <img src="{% static 'images/chatbot3.png' %}" alt="Chatbot" width="100px">
</div>

<!-- Chatbot Iframe and Close Button -->
<div id="chatbotContainer" style="position: fixed; bottom: 0; right: 0; transform: translateX(100%); opacity: 0; z-index: 999999999">
    <iframe
        src="https://nextjs-chat-lake-rho.vercel.app/"
        title="Chatbot"
        class="chatbot-iframe"
        style="width: 550px; height: 500px; border: none;"
        id="chatbotIframe"
    ></iframe>
    <button style="position: absolute; top: 0; right: 0; cursor: pointer;" onclick="toggleChatbot()">Close</button>
</div>

<script>
var showChatbot = false;
function toggleChatbot() {
    showChatbot = !showChatbot;
    var container = document.getElementById('chatbotContainer');
    container.style.transform = showChatbot ? 'translateX(0)' : 'translateX(100%)';
    container.style.opacity = showChatbot ? '1' : '0';
}
</script>
{% block scripts %}

{% endblock scripts %}

</body>
</html>